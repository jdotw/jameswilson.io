---
import { getCollection, getEntryBySlug } from "astro:content";
import { Image } from "@astrojs/image/components";

const articlePosts = (await getCollection("articles")).sort(
  (a, b) => b.data.date.getTime() - a.data.date.getTime()
);
const latestPost = articlePosts[0];
---

<div>
  <div class="flex flex-col md:flex-row items-center">
    <div class="flex flex-col md:flex-grow">
      <h1>{latestPost.data.title}</h1>
      {latestPost.data.subtitle && <h2>{latestPost.data.subtitle}</h2>}
    </div>
    <Image
      src={`/${latestPost.data.image}`}
      alt={latestPost.data.title}
      width={500}
      height={300}
      format="png"
    />
  </div>
  <div class="grid grid-cols-2 md:grid-cols-3">
    {
      articlePosts.slice(1).map((post) => (
        <div class="flex flex-col items-center">
          <div class="flex flex-col md:flex-grow">
            <h1>{post.data.title}</h1>
            {post.data.subtitle && <h2>{post.data.subtitle}</h2>}
          </div>
          <Image
            src={`/${post.data.image}`}
            alt={post.data.title}
            width={200}
            height={100}
            format="png"
          />
        </div>
      ))
    }
  </div>
</div>
